{"version":3,"file":"presentation.js","sources":["../../src/presentation/overlays/useSharedState.ts","../../src/presentation/constants.ts","../../src/presentation/util/props.ts","../../src/presentation/useDocumentLocations.ts","../../src/presentation/i18n/index.ts","../../src/presentation/usePresentationTool.ts","../../src/presentation/document/useCurrentPresentationToolName.ts","../../src/presentation/document/LocationsBanner.tsx","../../src/presentation/document/PresentationDocumentHeader.tsx","../../src/presentation/document/PresentationDocumentProvider.tsx","../../src/presentation/fieldActions/openInStructure.ts","../../src/presentation/getIntentState.ts","../../src/presentation/PresentationSpinner.tsx","../../src/presentation/router.ts","../../src/presentation/plugin.tsx","../../src/presentation/reducers/presentationReducer.ts","../../src/presentation/usePresentationNavigate.ts","../../src/presentation/usePresentationParams.ts"],"sourcesContent":["import {type Serializable} from '@sanity/presentation-comlink'\nimport {useContext, useEffect} from 'react'\nimport {PresentationSharedStateContext} from 'sanity/_singletons'\n\n/** @public */\nexport const useSharedState = (key: string, value: Serializable): undefined => {\n  const context = useContext(PresentationSharedStateContext)\n\n  if (!context) {\n    throw new Error('Preview Snapshots context is missing')\n  }\n\n  const {setValue} = context\n\n  useEffect(() => {\n    setValue(key, value)\n  }, [key, value, setValue])\n\n  return undefined\n}\n","import {ComposeIcon} from '@sanity/icons'\nimport {apiVersion} from '@sanity/preview-url-secret/constants'\n\nexport const DEFAULT_TOOL_ICON = ComposeIcon\nexport const DEFAULT_TOOL_NAME = 'presentation'\nexport const DEFAULT_TOOL_TITLE = 'Presentation'\n\nexport const EDIT_INTENT_MODE = 'presentation'\n\n// How long we wait until an iframe is loaded until we consider it to be slow and possibly failed\nexport const MAX_TIME_TO_OVERLAYS_CONNECTION = 3_000 // ms\n\n// The API version to use when using `@sanity/client`\nexport const API_VERSION = apiVersion\n\n// Heartbeats shouldn't fire on intervals that are so short it causes performance issues\nexport const MIN_LOADER_QUERY_LISTEN_HEARTBEAT_INTERVAL = 1000 // ms\n\n// How often the list over loader queries should be garbage collected\nexport const LOADER_QUERY_GC_INTERVAL = 30_000 // ms\n\n// The interval at which we check if existing popups have been closed\nexport const POPUP_CHECK_INTERVAL = 1000 // ms\n","import {\n  combineLatest,\n  from,\n  isObservable,\n  map,\n  mergeAll,\n  Observable,\n  of,\n  scan,\n  switchMap,\n} from 'rxjs'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Props<K extends keyof any, T> = {\n  [P in K]: T | Observable<T>\n}\n\nfunction keysOf<T extends object>(value: T) {\n  return Object.keys(value) as (keyof T)[]\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction setKey(source: Record<string, unknown>, key: any, value: unknown) {\n  return {\n    ...source,\n    [key]: value,\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function props<K extends keyof any, T>(options: {wait?: boolean} = {}) {\n  return (source: Observable<Props<K, T>>): Observable<Record<string, unknown>> => {\n    return new Observable<Props<K, T>>((observer) => source.subscribe(observer)).pipe(\n      switchMap((object) => {\n        const keyObservables = keysOf(object).map((key) => {\n          const value = object[key]\n          return isObservable(value) ? from(value).pipe(map((val) => [key, val])) : of([key, value])\n        })\n\n        return options.wait\n          ? combineLatest(keyObservables).pipe(\n              map((pairs) => pairs.reduce((acc, [key, value]) => setKey(acc, key, value), {})),\n            )\n          : from(keyObservables).pipe(\n              mergeAll(),\n              scan((acc, [key, value]) => setKey(acc, key, value), {}),\n            )\n      }),\n    )\n  }\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\nimport {type StackablePerspective} from '@sanity/client'\nimport {get} from 'lodash'\nimport {useEffect, useMemo, useState} from 'react'\nimport {isObservable, map, type Observable, of, switchMap} from 'rxjs'\nimport {\n  type DocumentStore,\n  getDraftId,\n  getPublishedId,\n  getVersionId,\n  isRecord,\n  isReference,\n  type Previewable,\n  type SanityDocument,\n  useDocumentStore,\n  usePerspective,\n} from 'sanity'\n\nimport {\n  type DocumentLocationResolver,\n  type DocumentLocationResolverObject,\n  type DocumentLocationResolvers,\n  type DocumentLocationsState,\n  type DocumentLocationsStatus,\n} from './types'\nimport {props} from './util/props'\n\nconst INITIAL_STATE: DocumentLocationsState = {locations: []}\n\nfunction getDocumentId(value: Previewable) {\n  if (isReference(value)) {\n    return value._ref\n  }\n  return '_id' in value ? value._id : undefined\n}\n\nfunction cleanPreviewable(id: string | undefined, previewable: Previewable) {\n  const clean: Record<string, unknown> = id ? {...previewable, _id: id} : {...previewable}\n\n  if (clean._type === 'reference') {\n    delete clean._type\n    delete clean._ref\n    delete clean._weak\n    delete clean._dataset\n    delete clean._projectId\n    delete clean._strengthenOnPublish\n  }\n\n  return clean\n}\n\nfunction listen(\n  id: string,\n  fields: string[],\n  store: DocumentStore,\n  perspectiveStack: StackablePerspective[],\n) {\n  const projection = fields.join(', ')\n  const query = {\n    fetch: `*[_id==$id][0]{${projection}}`,\n    // TODO: is it more performant to use `||` instead of `in`?\n    listen: `*[_id in $versions]`,\n  }\n  const params = {\n    id,\n    versions: perspectiveStack\n      .map((p) => {\n        if (p === 'drafts') return getDraftId(id)\n        return getVersionId(getPublishedId(id), p)\n      })\n      .concat(getPublishedId(id)),\n  }\n  return store.listenQuery(query, params, {\n    perspective: perspectiveStack,\n    tag: 'use-document-locations',\n  }) as Observable<SanityDocument | null>\n}\nfunction observeDocument(\n  value: Previewable | null,\n  paths: string[][],\n  store: DocumentStore,\n  perspectiveStack: StackablePerspective[],\n): Observable<Record<string, unknown> | null> {\n  if (!value || typeof value !== 'object') {\n    return of(value)\n  }\n\n  const id = getDocumentId(value)\n  const currentValue = cleanPreviewable(id, value)\n\n  const headlessPaths = paths.filter((path) => !(path[0] in currentValue))\n\n  if (id && headlessPaths.length) {\n    const fields = [...new Set(headlessPaths.map((path: string[]) => path[0]))]\n    return listen(id, fields, store, perspectiveStack).pipe(\n      switchMap((snapshot) => {\n        if (snapshot) {\n          return observeDocument(snapshot, paths, store, perspectiveStack)\n        }\n        return of(null)\n      }),\n    )\n  }\n\n  const leads: Record<string, string[][]> = {}\n  paths.forEach((path) => {\n    const [head, ...tail] = path\n    if (!leads[head]) {\n      leads[head] = []\n    }\n    leads[head].push(tail)\n  })\n  const next = Object.keys(leads).reduce((res: Record<string, unknown>, head) => {\n    const tails = leads[head].filter((tail) => tail.length > 0)\n    if (tails.length === 0) {\n      res[head] = isRecord(value) ? (value as Record<string, unknown>)[head] : undefined\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      res[head] = observeDocument((value as any)[head], tails, store, perspectiveStack)\n    }\n    return res\n  }, currentValue)\n\n  return of(next).pipe(props({wait: true}))\n}\n\nfunction observeForLocations(\n  documentId: string,\n  resolver: DocumentLocationResolverObject<string>,\n  documentStore: DocumentStore,\n  perspectiveStack: StackablePerspective[],\n) {\n  const {select} = resolver\n  const paths = Object.values(select).map((value) => String(value).split('.')) || []\n  const doc = {_type: 'reference', _ref: documentId}\n  return observeDocument(doc, paths, documentStore, perspectiveStack).pipe(\n    map((doc) => {\n      return Object.keys(select).reduce<Record<string, unknown>>((acc, key) => {\n        acc[key] = get(doc, select[key])\n        return acc\n      }, {})\n    }),\n    map(resolver.resolve),\n  )\n}\n\nexport function useDocumentLocations(props: {\n  id: string\n  version: string | undefined\n  resolvers?: DocumentLocationResolver | DocumentLocationResolvers\n  type: string\n}): {\n  state: DocumentLocationsState\n  status: DocumentLocationsStatus\n} {\n  const {id, resolvers, type, version} = props\n  const documentStore = useDocumentStore()\n  const {perspectiveStack} = usePerspective()\n  const [locationsState, setLocationsState] = useState<DocumentLocationsState>(INITIAL_STATE)\n\n  const resolver = resolvers && (typeof resolvers === 'function' ? resolvers : resolvers[type])\n\n  const [locationsStatus, setLocationsStatus] = useState<DocumentLocationsStatus>(\n    resolver ? 'resolving' : 'empty',\n  )\n\n  const result = useMemo(() => {\n    if (!resolver) return undefined\n\n    // Original/advanced resolver which requires explicit use of Observables\n    if (typeof resolver === 'function') {\n      const params = {id, type, version, perspectiveStack}\n      const context = {documentStore}\n      const _result = resolver(params, context)\n      return isObservable(_result) ? _result : of(_result)\n    }\n\n    // Simplified resolver pattern which abstracts away Observable logic\n    if ('select' in resolver && 'resolve' in resolver) {\n      return observeForLocations(id, resolver, documentStore, perspectiveStack)\n    }\n\n    // Resolver is explicitly provided state\n    return of(resolver)\n  }, [documentStore, id, resolver, type, version, perspectiveStack])\n\n  useEffect(() => {\n    const sub = result?.subscribe((state) => {\n      setLocationsState(state || INITIAL_STATE)\n      setLocationsStatus(state ? 'resolved' : 'empty')\n    })\n\n    return () => sub?.unsubscribe()\n  }, [result])\n\n  return {\n    state: locationsState,\n    status: locationsStatus,\n  }\n}\n","import {defineLocaleResourceBundle} from 'sanity'\n\n/**\n * The locale namespace for the presentation tool\n *\n * @public\n */\nexport const presentationLocaleNamespace = 'presentation' as const\n\n/**\n * The default locale bundle for the presentation tool, which is US English.\n *\n * @internal\n */\nexport const presentationUsEnglishLocaleBundle = defineLocaleResourceBundle({\n  locale: 'en-US',\n  namespace: presentationLocaleNamespace,\n  resources: () => import('./resources'),\n})\n","import {useContext} from 'react'\nimport {PresentationContext} from 'sanity/_singletons'\n\nimport {type PresentationContextValue} from './types'\n\nexport function usePresentationTool(throwOnMissingContext?: true): PresentationContextValue\nexport function usePresentationTool(throwOnMissingContext: false): PresentationContextValue | null\nexport function usePresentationTool(throwOnMissingContext = true): PresentationContextValue | null {\n  const presentation = useContext(PresentationContext)\n\n  if (throwOnMissingContext && !presentation) {\n    throw new Error('Presentation context is missing')\n  }\n\n  return presentation\n}\n","import {usePresentationTool} from '../usePresentationTool'\n\nexport function useCurrentPresentationToolName(): string | undefined {\n  return usePresentationTool(false)?.name ?? undefined\n}\n","import {\n  ChevronRightIcon,\n  DesktopIcon,\n  ErrorOutlineIcon,\n  InfoOutlineIcon,\n  WarningOutlineIcon,\n} from '@sanity/icons'\nimport {Box, Card, Flex, Spinner, Stack, Text} from '@sanity/ui'\nimport {type ComponentType, type ReactNode, useCallback, useContext, useState} from 'react'\nimport {type ObjectSchemaType, useTranslation} from 'sanity'\nimport {PresentationContext} from 'sanity/_singletons'\nimport {useIntentLink} from 'sanity/router'\n\nimport {DEFAULT_TOOL_NAME, DEFAULT_TOOL_TITLE} from '../constants'\nimport {presentationLocaleNamespace} from '../i18n'\nimport {\n  type DocumentLocation,\n  type DocumentLocationsState,\n  type PresentationPluginOptions,\n} from '../types'\nimport {useCurrentPresentationToolName} from './useCurrentPresentationToolName'\n\nconst TONE_ICONS: Record<'positive' | 'caution' | 'critical', ComponentType> = {\n  positive: InfoOutlineIcon,\n  caution: WarningOutlineIcon,\n  critical: ErrorOutlineIcon,\n}\n\nexport function LocationsBanner(props: {\n  documentId: string\n  isResolving: boolean\n  options: PresentationPluginOptions\n  schemaType: ObjectSchemaType\n  showPresentationTitle: boolean\n  state: DocumentLocationsState\n}): ReactNode {\n  const {documentId, isResolving, options, schemaType, showPresentationTitle} = props\n  const {locations, message, tone} = props.state\n  const len = locations?.length || 0\n\n  const {t} = useTranslation(presentationLocaleNamespace)\n  const presentation = useContext(PresentationContext)\n  const presentationName = presentation?.name\n  const [expanded, setExpanded] = useState(false)\n  const toggle = useCallback(() => {\n    if (!len) return\n    setExpanded((v) => !v)\n  }, [len])\n\n  const title = isResolving\n    ? t('locations-banner.resolving.text')\n    : message || t('locations-banner.locations-count', {count: len})\n\n  const ToneIcon = tone ? TONE_ICONS[tone] : undefined\n\n  return (\n    <Card padding={1} radius={2} border tone={tone}>\n      <div style={{margin: -1}}>\n        {!locations && (\n          <Flex align=\"flex-start\" gap={3} padding={3}>\n            {tone && ToneIcon && (\n              <Box flex=\"none\">\n                <Text size={1}>\n                  <ToneIcon />\n                </Text>\n              </Box>\n            )}\n            <Box flex={1}>\n              <Text size={1} weight=\"medium\">\n                {showPresentationTitle && <>{options.title || DEFAULT_TOOL_TITLE} &middot; </>}\n                {title}\n              </Text>\n            </Box>\n          </Flex>\n        )}\n        {locations && (\n          <>\n            <Card\n              as={len ? 'button' : undefined}\n              onClick={toggle}\n              padding={3}\n              radius={1}\n              tone=\"inherit\"\n            >\n              <Flex gap={3}>\n                <Box flex=\"none\">\n                  {isResolving ? (\n                    <Spinner size={1} />\n                  ) : (\n                    <Text size={1}>\n                      {len === 0 ? (\n                        <InfoOutlineIcon />\n                      ) : (\n                        <ChevronRightIcon\n                          style={{\n                            transform: `rotate(${expanded ? '90deg' : 0})`,\n                            transition: 'transform 100ms ease-in-out',\n                          }}\n                        />\n                      )}\n                    </Text>\n                  )}\n                </Box>\n                <Box flex={1}>\n                  <Text size={1} weight=\"medium\">\n                    {showPresentationTitle && <>{options.title || DEFAULT_TOOL_TITLE} &middot; </>}\n                    {title}\n                  </Text>\n                </Box>\n              </Flex>\n            </Card>\n            <Stack hidden={!expanded} marginTop={1} space={1}>\n              {locations.map((l, index) => (\n                <LocationItem\n                  active={\n                    (options.name || DEFAULT_TOOL_NAME) === presentationName &&\n                    l.href === presentation?.params.preview\n                  }\n                  documentId={documentId}\n                  documentType={schemaType.name}\n                  key={index}\n                  node={l}\n                  toolName={options.name || DEFAULT_TOOL_NAME}\n                />\n              ))}\n            </Stack>\n          </>\n        )}\n      </div>\n    </Card>\n  )\n}\n\nfunction LocationItem(props: {\n  active: boolean\n  documentId: string\n  documentType: string\n  node: DocumentLocation\n  toolName: string\n}) {\n  const {documentId, documentType, node, active, toolName} = props\n  const presentation = useContext(PresentationContext)\n  const currentPresentationToolName = useCurrentPresentationToolName()\n  const isCurrentTool = toolName === currentPresentationToolName\n  const navigate = presentation?.navigate\n\n  const presentationLinkProps = useIntentLink({\n    intent: 'edit',\n    params: {\n      id: documentId,\n      type: documentType,\n      mode: 'presentation',\n      presentation: toolName,\n      ...presentation?.structureParams,\n      preview: node.href,\n    },\n  })\n\n  const handleCurrentToolClick = useCallback(() => {\n    navigate?.({}, {preview: node.href})\n  }, [node.href, navigate])\n\n  return (\n    <Card\n      {...(isCurrentTool ? {} : presentationLinkProps)}\n      as=\"a\"\n      key={node.href}\n      onClick={isCurrentTool ? handleCurrentToolClick : presentationLinkProps.onClick}\n      padding={3}\n      radius={1}\n      pressed={active}\n      tone=\"inherit\"\n    >\n      <Flex gap={3}>\n        <Box flex=\"none\">\n          <Text size={1}>\n            <DesktopIcon />\n          </Text>\n        </Box>\n        <Stack flex={1} space={2}>\n          <Text size={1} weight=\"medium\">\n            {node.title}\n          </Text>\n          <Text muted size={1} textOverflow=\"ellipsis\">\n            {node.href}\n          </Text>\n        </Stack>\n      </Flex>\n    </Card>\n  )\n}\n","import {rem, Stack} from '@sanity/ui'\nimport {type ReactNode, useContext} from 'react'\nimport {type ObjectSchemaType, type PublishedId} from 'sanity'\nimport {PresentationDocumentContext} from 'sanity/_singletons'\nimport {styled} from 'styled-components'\n\nimport {type PresentationPluginOptions} from '../types'\nimport {useDocumentLocations} from '../useDocumentLocations'\nimport {LocationsBanner} from './LocationsBanner'\n\nconst LocationStack = styled(Stack)`\n  min-height: ${rem(42)};\n\n  & + &:empty {\n    display: none;\n  }\n`\n\nexport function PresentationDocumentHeader(props: {\n  documentId: PublishedId\n  version: string | undefined\n  options: PresentationPluginOptions\n  schemaType: ObjectSchemaType\n}): ReactNode {\n  const {documentId, options, schemaType, version} = props\n  const context = useContext(PresentationDocumentContext)\n  const {state, status} = useDocumentLocations({\n    id: documentId,\n    version,\n    resolvers: options.resolve?.locations || options.locate,\n    type: schemaType.name,\n  })\n\n  if ((context && context.options[0] !== options) || status === 'empty') {\n    return null\n  }\n\n  const contextOptions = context?.options || []\n\n  return (\n    <LocationStack marginBottom={5} space={5}>\n      <Stack space={2}>\n        {contextOptions.map(\n          (\n            // eslint-disable-next-line @typescript-eslint/no-shadow\n            options,\n            idx,\n          ) => (\n            <LocationsBanner\n              documentId={documentId}\n              isResolving={status === 'resolving'}\n              key={idx}\n              options={options}\n              schemaType={schemaType}\n              showPresentationTitle={contextOptions.length > 1}\n              state={state}\n            />\n          ),\n        )}\n      </Stack>\n    </LocationStack>\n  )\n}\n","import {type ReactNode, useCallback, useContext, useLayoutEffect, useMemo, useState} from 'react'\nimport {PresentationDocumentContext} from 'sanity/_singletons'\nimport {useEffectEvent} from 'use-effect-event'\n\nimport {type PresentationPluginOptions} from '../types'\nimport {type PresentationDocumentContextValue} from './types'\n\n/** @internal */\nexport function PresentationDocumentProvider(props: {\n  children?: ReactNode\n  options: PresentationPluginOptions\n}): React.JSX.Element {\n  const {children, options} = props\n  const parent = useContext(PresentationDocumentContext)\n  const parentRegister = parent?.register\n\n  const [optionsArray, setOptionsArray] = useState<PresentationPluginOptions[]>(() => [])\n\n  const register = useCallback(\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    (options: PresentationPluginOptions) => {\n      if (parentRegister) {\n        return parentRegister(options)\n      }\n\n      setOptionsArray((prev) => [options].concat(prev))\n\n      return () => {\n        setOptionsArray((prev) => prev.filter((o) => o !== options))\n      }\n    },\n    [parentRegister],\n  )\n\n  const context: PresentationDocumentContextValue = useMemo(\n    () => ({\n      options: parent?.options || optionsArray,\n      register,\n    }),\n    [optionsArray, parent, register],\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  const registerEffectEvent = useEffectEvent((options: PresentationPluginOptions) =>\n    register(options),\n  )\n  useLayoutEffect(() => registerEffectEvent(options), [options])\n\n  return (\n    <PresentationDocumentContext.Provider value={context}>\n      {children}\n    </PresentationDocumentContext.Provider>\n  )\n}\n","import {MasterDetailIcon} from '@sanity/icons'\nimport {useContext, useMemo} from 'react'\nimport {\n  defineDocumentFieldAction,\n  type DocumentFieldActionGroup,\n  type DocumentFieldActionItem,\n  type DocumentFieldActionProps,\n  isRecord,\n  pathToString,\n  type Tool,\n  useWorkspace,\n} from 'sanity'\nimport {PresentationContext} from 'sanity/_singletons'\nimport {useRouter} from 'sanity/router'\n\nimport {DEFAULT_TOOL_NAME} from '../constants'\n\nfunction useOpenInStructureAction(\n  props: DocumentFieldActionProps,\n): DocumentFieldActionItem | DocumentFieldActionGroup {\n  const {documentId, documentType, path} = props\n  const workspace = useWorkspace()\n  const {navigateIntent} = useRouter()\n  const presentation = useContext(PresentationContext)\n\n  const defaultStructureTool = useMemo(\n    () =>\n      findStructureTool(\n        workspace.tools,\n        documentId,\n        documentType,\n        presentation?.name || DEFAULT_TOOL_NAME,\n      ),\n    [documentId, documentType, workspace.tools, presentation],\n  )\n\n  return {\n    type: 'action',\n    hidden: !presentation || path.length > 0 || !defaultStructureTool,\n    icon: defaultStructureTool?.icon || MasterDetailIcon,\n    title: `Open in ${defaultStructureTool?.title || 'Structure'}`,\n    onAction() {\n      navigateIntent('edit', {\n        id: documentId,\n        type: documentType,\n        mode: 'structure',\n        path: pathToString(path),\n      })\n    },\n    renderAsButton: true,\n  }\n}\n\nexport const openInStructure = defineDocumentFieldAction({\n  name: 'presentation/openInStructure',\n  useAction: useOpenInStructureAction,\n})\n\nfunction findStructureTool(\n  tools: Tool[],\n  documentId: string,\n  documentType: string,\n  presentationToolName?: string,\n): Tool | undefined {\n  const results = tools\n    .filter((t) => t.name !== presentationToolName)\n    .map((t) => {\n      const match = t.canHandleIntent?.(\n        'edit',\n        {\n          id: documentId,\n          type: documentType,\n          mode: 'structure',\n        },\n        {},\n      )\n\n      return {tool: t, match}\n    })\n\n  const modeMatches = results.filter((t) => isRecord(t.match) && t.match.mode)\n\n  if (modeMatches.length > 0) {\n    return modeMatches[0].tool\n  }\n\n  const matches = results.filter((t) => t.match)\n\n  return matches[0]?.tool\n}\n","import {uuid} from '@sanity/uuid'\nimport {getPublishedId} from 'sanity'\nimport {encodeJsonParams, type RouterState, type SearchParam} from 'sanity/router'\n\nimport {type PresentationSearchParams, type PresentationStateParams} from './types'\n\nconst preservedSearchParamKeys: Array<keyof PresentationSearchParams> = ['preview', 'viewport']\n\n/**\n * @internal\n */\nexport function getIntentState(\n  intent: string,\n  params: Record<string, string>,\n  routerState: RouterState | undefined,\n  payload: unknown,\n):\n  | (PresentationStateParams & {_searchParams: SearchParam[]})\n  | {intent: string; params: Record<string, string>; payload: unknown} {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const {id, mode, path, presentation, type, ...searchParams} = params\n\n  const preservedSearchParams = (routerState?._searchParams || [])\n    // @todo Casting https://github.com/microsoft/TypeScript/issues/14520\n    .filter(([key]) => preservedSearchParamKeys.includes(key as keyof PresentationSearchParams))\n    .reduce((acc, [key, value]) => ({...acc, [key]: value}), {} as Record<string, string>)\n\n  const _searchParams = {\n    ...preservedSearchParams,\n    ...searchParams,\n  }\n\n  if (intent === 'edit' && id) {\n    _searchParams.preview =\n      _searchParams.preview || new URLSearchParams(window.location.search).get('preview') || '/'\n    return {\n      type: type || '*',\n      id: getPublishedId(id),\n      path,\n      _searchParams: Object.entries(_searchParams),\n    }\n  }\n\n  if (intent === 'create') {\n    _searchParams.preview =\n      _searchParams.preview || new URLSearchParams(window.location.search).get('preview') || '/'\n\n    if (payload && typeof payload === 'object') {\n      _searchParams.templateParams = encodeJsonParams(payload as Record<string, unknown>)\n    }\n\n    return {\n      type: type || '*',\n      id: id || uuid(),\n      _searchParams: Object.entries(_searchParams),\n    }\n  }\n  return {intent, params, payload}\n}\n","import {Flex, Spinner} from '@sanity/ui'\n\nexport function PresentationSpinner(): React.JSX.Element {\n  return (\n    <Flex align=\"center\" direction=\"column\" height=\"fill\" justify=\"center\" style={{width: '100%'}}>\n      <Spinner />\n    </Flex>\n  )\n}\n","import {route} from 'sanity/router'\n\n// eslint-disable-next-line camelcase\nexport const router = route.create('/', {__unsafe_disableScopedSearchParams: true}, [\n  route.intents('/intent'),\n  route.create(':type', [route.create(':id', [route.create(':path')])]),\n])\n","import {type SanityDocument} from '@sanity/client'\nimport {lazy, Suspense} from 'react'\nimport {\n  definePlugin,\n  getPublishedId,\n  getVersionFromId,\n  type InputProps,\n  isDocumentSchemaType,\n} from 'sanity'\n\nimport {DEFAULT_TOOL_ICON, DEFAULT_TOOL_NAME, EDIT_INTENT_MODE} from './constants'\nimport {PresentationDocumentHeader} from './document/PresentationDocumentHeader'\nimport {PresentationDocumentProvider} from './document/PresentationDocumentProvider'\nimport {openInStructure} from './fieldActions/openInStructure'\nimport {getIntentState} from './getIntentState'\nimport {presentationUsEnglishLocaleBundle} from './i18n'\nimport {PresentationSpinner} from './PresentationSpinner'\nimport {router} from './router'\nimport {\n  type DocumentLocationResolverObject,\n  type DocumentLocationsState,\n  type DocumentResolver,\n  type PresentationPluginOptions,\n} from './types'\n\nconst PresentationTool = lazy(() => import('./PresentationToolGrantsCheck'))\nconst BroadcastDisplayedDocument = lazy(() => import('./loader/BroadcastDisplayedDocument'))\n\n/**\n * Define locations for a given document type.\n * This function doesn't do anything itself, it is used to provide type information.\n * @param resolver - resolver that return locations for a document.\n * @public\n */\nexport function defineLocations<K extends string>(\n  resolver: DocumentLocationResolverObject<K> | DocumentLocationsState,\n): typeof resolver {\n  return resolver\n}\n\n/**\n * Define documents for a given location.\n * This function doesn't do anything itself, it is used to provide type information.\n * @param resolvers - resolvers that return documents.\n * @public\n */\nexport function defineDocuments(resolvers: DocumentResolver[]): typeof resolvers {\n  return resolvers\n}\n\n/** @public */\nexport const presentationTool = definePlugin<PresentationPluginOptions>((options) => {\n  const toolName = options.name || DEFAULT_TOOL_NAME\n\n  if ('locate' in options) {\n    // eslint-disable-next-line no-console\n    console.warn('Presentationâ€™s `locate` option is deprecated. Use `resolve.locations` instead.')\n  }\n\n  const hasLocationsResolver = !!(options.resolve?.locations || options.locate)\n\n  function PresentationDocumentInput(props: InputProps) {\n    const value = props.value as SanityDocument\n    const documentId = value?._id ? getPublishedId(value?._id) : undefined\n    const documentVersion = value?._id ? getVersionFromId(value._id) : undefined\n    if (isDocumentSchemaType(props.schemaType)) {\n      return (\n        <PresentationDocumentProvider options={options}>\n          {hasLocationsResolver && documentId && (\n            <PresentationDocumentHeader\n              documentId={documentId}\n              version={documentVersion}\n              options={options}\n              schemaType={props.schemaType}\n            />\n          )}\n          <Suspense fallback={<PresentationSpinner />}>{props.renderDefault(props)}</Suspense>\n          <Suspense key=\"broadcast-displayed-document\">\n            <BroadcastDisplayedDocument key={documentId} value={value} />\n          </Suspense>\n        </PresentationDocumentProvider>\n      )\n    }\n\n    return props.renderDefault(props)\n  }\n\n  function canHandleCreateIntent(params: Record<string, unknown>) {\n    // We can't handle create intents without a `type` parameter\n    if (!('type' in params)) {\n      return false\n    }\n\n    if ('presentation' in params && params.presentation !== toolName) {\n      return false\n    }\n\n    return 'template' in params ? {template: true} : true\n  }\n\n  function canHandleEditIntent(params: Record<string, unknown>) {\n    // We can't handle edit intents without `type` or `id` parameters\n    if (!('type' in params) || !('id' in params)) {\n      return false\n    }\n\n    if ('presentation' in params && params.presentation !== toolName) {\n      return false\n    }\n\n    return 'mode' in params ? {mode: params.mode === EDIT_INTENT_MODE} : true\n  }\n\n  return {\n    i18n: {\n      bundles: [presentationUsEnglishLocaleBundle],\n    },\n    document: {\n      unstable_fieldActions: (prev) => {\n        return [\n          ...prev.filter((a) => a.name !== openInStructure.name), // prevent duplication\n          openInStructure,\n        ]\n      },\n    },\n\n    form: {\n      components: {\n        input: PresentationDocumentInput,\n      },\n    },\n\n    tools: [\n      {\n        icon: options.icon || DEFAULT_TOOL_ICON,\n        name: toolName,\n        title: options.title,\n        component: PresentationTool,\n        options,\n        canHandleIntent(intent, params) {\n          if (intent === 'create') return canHandleCreateIntent(params)\n          if (intent === 'edit') return canHandleEditIntent(params)\n          return false\n        },\n        getIntentState,\n        router,\n        __internalApplicationType: 'sanity/presentation',\n      },\n    ],\n  }\n})\n","import {type Dispatch, type Reducer} from 'react'\nimport {boolean, fallback, object, parse, picklist} from 'valibot'\n\n/** @public */\nexport interface PresentationState {\n  mainDocument: boolean\n  iframe: {\n    status: 'loading' | 'loaded' | 'refreshing' | 'reloading'\n  }\n  visualEditing: {\n    overlaysEnabled: boolean\n  }\n}\n\n/** @public */\nexport const ACTION_IFRAME_LOADED = 'ACTION_IFRAME_LOADED'\n/** @public */\nexport const ACTION_IFRAME_REFRESH = 'ACTION_IFRAME_REFRESH'\n/** @public */\nexport const ACTION_IFRAME_RELOAD = 'ACTION_IFRAME_RELOAD'\n/** @public */\nexport const ACTION_VISUAL_EDITING_OVERLAYS_TOGGLE = 'ACTION_VISUAL_EDITING_OVERLAYS_TOGGLE'\n\n/** @public */\nexport interface IframeLoadedAction {\n  type: typeof ACTION_IFRAME_LOADED\n}\n/** @public */\nexport interface IframeRefreshAction {\n  type: typeof ACTION_IFRAME_REFRESH\n}\n/** @public */\nexport interface IframeReloadAction {\n  type: typeof ACTION_IFRAME_RELOAD\n}\n/** @public */\nexport interface VisualEditingOverlaysToggleAction {\n  type: typeof ACTION_VISUAL_EDITING_OVERLAYS_TOGGLE\n  enabled: boolean\n}\n\n/** @public */\nexport type PresentationAction =\n  | IframeLoadedAction\n  | IframeRefreshAction\n  | IframeReloadAction\n  | VisualEditingOverlaysToggleAction\n\nexport const presentationReducer: Reducer<\n  Readonly<PresentationState>,\n  Readonly<PresentationAction>\n> = (state, action) => {\n  switch (action.type) {\n    case ACTION_IFRAME_LOADED:\n      return state.iframe.status === 'loaded'\n        ? state\n        : {\n            ...state,\n            iframe: {\n              ...state.iframe,\n              status: 'loaded',\n            },\n          }\n    case ACTION_IFRAME_REFRESH:\n      return state.iframe.status === 'refreshing'\n        ? state\n        : {\n            ...state,\n            iframe: {\n              ...state.iframe,\n              status: 'refreshing',\n            },\n          }\n    case ACTION_IFRAME_RELOAD:\n      return state.iframe.status === 'reloading'\n        ? state\n        : {\n            ...state,\n            iframe: {\n              ...state.iframe,\n              status: 'reloading',\n            },\n          }\n    case ACTION_VISUAL_EDITING_OVERLAYS_TOGGLE:\n      return toggleVisualEditingOverlays(state, action)\n    default:\n      return state\n  }\n}\n\nconst toggleVisualEditingOverlays: Reducer<\n  Readonly<PresentationState>,\n  Readonly<VisualEditingOverlaysToggleAction>\n> = (state, action) => {\n  if (state.visualEditing.overlaysEnabled === action.enabled) return state\n  return {\n    ...state,\n    visualEditing: {\n      ...state.visualEditing,\n      overlaysEnabled: action.enabled,\n    },\n  }\n}\n\nconst mainDocumentSchema = fallback(boolean(), false)\n\nconst iframeStatusSchema = picklist(['loading', 'loaded', 'refreshing', 'reloading'])\n\nconst initStateSchema = object({\n  mainDocument: mainDocumentSchema,\n  iframe: object({\n    status: iframeStatusSchema,\n  }),\n  visualEditing: object({overlaysEnabled: boolean()}),\n})\n\nconst INITIAL_PRESENTATION_STATE = {\n  mainDocument: false,\n  iframe: {\n    status: 'loading',\n  },\n  visualEditing: {\n    overlaysEnabled: false,\n  },\n} as const satisfies PresentationState\n\nexport function presentationReducerInit(\n  state: Readonly<Partial<PresentationState>>,\n): Readonly<PresentationState> {\n  return parse(initStateSchema, {...INITIAL_PRESENTATION_STATE, ...state})\n}\n\n/** @public */\nexport type DispatchPresentationAction = Dispatch<Readonly<PresentationAction>>\n","import {useContext} from 'react'\nimport {PresentationNavigateContext} from 'sanity/_singletons'\n\nimport {type PresentationNavigateContextValue} from './types'\n\n/** @public */\nexport function usePresentationNavigate(): PresentationNavigateContextValue {\n  const navigate = useContext(PresentationNavigateContext)\n\n  if (!navigate) {\n    throw new Error('Presentation navigate context is missing')\n  }\n\n  return navigate\n}\n\nexport type {PresentationNavigateContextValue}\n","import {useContext} from 'react'\nimport {PresentationParamsContext} from 'sanity/_singletons'\n\nimport {type PresentationParamsContextValue} from './types'\n\n/** @public */\nexport function usePresentationParams(throwOnMissingContext?: true): PresentationParamsContextValue\n/** @public */\nexport function usePresentationParams(\n  throwOnMissingContext: false,\n): PresentationParamsContextValue | null\n/** @public */\nexport function usePresentationParams(\n  throwOnMissingContext = true,\n): PresentationParamsContextValue | null {\n  const params = useContext(PresentationParamsContext)\n\n  if (throwOnMissingContext && !params) {\n    throw new Error('Presentation params context is missing')\n  }\n\n  return params\n}\n"],"names":["useSharedState","key","value","$","_c","context","useContext","PresentationSharedStateContext","Error","setValue","t0","t1","useEffect","DEFAULT_TOOL_ICON","ComposeIcon","DEFAULT_TOOL_NAME","DEFAULT_TOOL_TITLE","EDIT_INTENT_MODE","MAX_TIME_TO_OVERLAYS_CONNECTION","API_VERSION","apiVersion","MIN_LOADER_QUERY_LISTEN_HEARTBEAT_INTERVAL","LOADER_QUERY_GC_INTERVAL","POPUP_CHECK_INTERVAL","keysOf","Object","keys","setKey","source","props","options","Observable","observer","subscribe","pipe","switchMap","object","keyObservables","map","isObservable","from","val","of","wait","combineLatest","pairs","reduce","acc","mergeAll","scan","INITIAL_STATE","locations","getDocumentId","isReference","_ref","_id","undefined","cleanPreviewable","id","previewable","clean","_type","_weak","_dataset","_projectId","_strengthenOnPublish","listen","fields","store","perspectiveStack","query","fetch","join","params","versions","p","getDraftId","getVersionId","getPublishedId","concat","listenQuery","perspective","tag","observeDocument","paths","currentValue","headlessPaths","filter","path","length","Set","snapshot","leads","forEach","head","tail","push","next","res","tails","isRecord","observeForLocations","documentId","resolver","documentStore","select","values","String","split","doc","get","resolve","useDocumentLocations","resolvers","type","version","useDocumentStore","usePerspective","locationsState","setLocationsState","useState","locationsStatus","setLocationsStatus","bb0","_result","result","t2","sub","state","unsubscribe","t3","status","presentationLocaleNamespace","presentationUsEnglishLocaleBundle","defineLocaleResourceBundle","locale","namespace","resources","usePresentationTool","throwOnMissingContext","presentation","PresentationContext","useCurrentPresentationToolName","name","TONE_ICONS","positive","InfoOutlineIcon","caution","WarningOutlineIcon","critical","ErrorOutlineIcon","LocationsBanner","isResolving","schemaType","showPresentationTitle","message","tone","len","t","useTranslation","presentationName","expanded","setExpanded","_temp","toggle","count","title","ToneIcon","Symbol","for","margin","jsxs","Flex","jsx","Box","Text","t4","Fragment","Card","Spinner","ChevronRightIcon","transform","transition","Stack","l","index","href","preview","t5","t6","v","LocationItem","documentType","node","active","toolName","currentPresentationToolName","isCurrentTool","navigate","structureParams","intent","mode","presentationLinkProps","useIntentLink","handleCurrentToolClick","onClick","DesktopIcon","t7","t8","t9","LocationStack","styled","rem","PresentationDocumentHeader","PresentationDocumentContext","locate","contextOptions","options_0","idx","PresentationDocumentProvider","children","parent","parentRegister","register","optionsArray","setOptionsArray","prev","prev_0","o","options_1","registerEffectEvent","useEffectEvent","useLayoutEffect","useOpenInStructureAction","workspace","useWorkspace","navigateIntent","useRouter","tools","findStructureTool","defaultStructureTool","icon","MasterDetailIcon","hidden","onAction","pathToString","renderAsButton","openInStructure","defineDocumentFieldAction","useAction","presentationToolName","results","match","canHandleIntent","tool","modeMatches","preservedSearchParamKeys","getIntentState","routerState","payload","searchParams","_searchParams","includes","URLSearchParams","window","location","search","entries","templateParams","encodeJsonParams","uuid","PresentationSpinner","width","router","route","create","__unsafe_disableScopedSearchParams","intents","PresentationTool","lazy","BroadcastDisplayedDocument","defineLocations","defineDocuments","presentationTool","definePlugin","console","warn","hasLocationsResolver","PresentationDocumentInput","getVersionFromId","documentVersion","isDocumentSchemaType","renderDefault","Suspense","canHandleCreateIntent","template","canHandleEditIntent","i18n","bundles","document","unstable_fieldActions","a","form","components","input","component","__internalApplicationType","ACTION_IFRAME_LOADED","ACTION_IFRAME_REFRESH","ACTION_IFRAME_RELOAD","ACTION_VISUAL_EDITING_OVERLAYS_TOGGLE","presentationReducer","action","iframe","toggleVisualEditingOverlays","visualEditing","overlaysEnabled","enabled","mainDocumentSchema","fallback","boolean","iframeStatusSchema","picklist","initStateSchema","mainDocument","INITIAL_PRESENTATION_STATE","presentationReducerInit","parse","usePresentationNavigate","PresentationNavigateContext","usePresentationParams","PresentationParamsContext"],"mappings":"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"}